<div class="card flex justify-center">
    <p-stepper [value]="1" class="basis-[50rem]">
        <p-step-list>
            <p-step [value]="1">Datos del Vehículo</p-step>
            <p-step [value]="2">Características del Vehículo</p-step>
            <p-step [value]="3">Imágenes del Vehículo</p-step>
        </p-step-list>
        <p-step-panels>
            <p-step-panel [value]="1">
                <ng-template #content let-activateCallback="activateCallback">
                    <div class="flex flex-col">
                        <datos-vehiculo [datosForm]="datosForm" [vehicleTypes]="vehicleTypes()" />
                        <div class="flex pt-6 justify-between">
                          @if (vehicleSelected()) {
                            <p-button label="Volver" severity="secondary" icon="pi pi-arrow-left" (onClick)="volver()" />
                          }
                            <p-button label="Siguiente" class="ml-auto" [disabled]="datosForm.invalid" icon="pi pi-arrow-right" iconPos="right" (onClick)="activateCallback(2)" />
                        </div>
                    </div>
                </ng-template>
            </p-step-panel>

            <p-step-panel [value]="2">
                <ng-template #content let-activateCallback="activateCallback">
                    <div class="flex flex-col">
                          <caracteristicas-vehiculo [caracteristicasForm]="caracteristicasForm" (emitMessage)="emitMessage($event)" />
                    </div>
                    <div class="flex pt-6 justify-between">
                        <p-button label="Volver" severity="secondary" icon="pi pi-arrow-left" (onClick)="activateCallback(1)" />
                        <p-button label="Siguiente" icon="pi pi-arrow-right" iconPos="right" [disabled]="caracteristicasForm.invalid" (onClick)="activateCallback(3);" />
                      </div>
                    </ng-template>
                  </p-step-panel>

                  <p-step-panel [value]="3">
                    <ng-template #content let-activateCallback="activateCallback">
                      <div class="flex flex-col">
                        <imagenes-vehiculo [imagenesForm]="imagenesForm" [uploadedFiles]="filesCache()" (uploadedFilesChange)="filesCache.set($event)" (emitMessage)="emitMessage($event)" />
                      </div>
                      <div class="flex pt-6 justify-between">
                        <p-button label="Volver" severity="secondary" icon="pi pi-arrow-left" iconPos="right" (onClick)="activateCallback(2)" />
                        <p-button label="Finalizar" [disabled]="filesCache().length === 0" (onClick)="agregarEditarVehiculo()" />
                    </div>
                </ng-template>
            </p-step-panel>
        </p-step-panels>
    </p-stepper>
</div>

<p-toast />
